<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>3DLayout Documentation</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="./doc_templates/pandoc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  <!DOCTYPE html>
  <html>
  <head>
      <style type="text/css">
          body {
          }
          #cover {
              border: 1px solid lightgray;
          }
      </style>
  </head>
  <body>
      <h1>ezzing3DLayout</h1>
      <h2>PV planning tool - API Documentation</h2>
  
      <img id="cover" class="w100" src="./doc_templates/portada.jpg" alt="ezzing3DLayout Documentation" />
  
      <h1>Table of contents</h1>
  </body>
  </html>
</head>
<body>
<header>
<h1 class="title">3DLayout Documentation</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#screenshots">Screenshots</a></li>
<li><a href="#3dlayout-interface">3DLayout Interface</a><ul>
<li><a href="#aside-panel">Aside Panel</a></li>
<li><a href="#canvas-area">Canvas Area</a><ul>
<li><a href="#buildings-index">Buildings Index</a></li>
<li><a href="#main-options">Main Options</a></li>
<li><a href="#control-buttons">Control Buttons</a></li>
<li><a href="#notifications">Notifications</a></li>
</ul></li>
</ul></li>
<li><a href="#buildings">Buildings</a><ul>
<li><a href="#building-creation">Building creation</a></li>
<li><a href="#add-building">Add building</a></li>
<li><a href="#edit-building">Edit building</a></li>
</ul></li>
<li><a href="#areas">Areas</a><ul>
<li><a href="#edit-area">Edit area</a></li>
</ul></li>
<li><a href="#subareas">Subareas</a><ul>
<li><a href="#subarea-creation">Subarea creation</a></li>
<li><a href="#add-subarea">Add subarea</a><ul>
<li><a href="#crop-subarea-to-the-area-shape">Crop subarea to the area shape</a></li>
<li><a href="#edit-subarea-vertices">Edit subarea vertices</a></li>
</ul></li>
<li><a href="#edit-subarea">Edit subarea</a></li>
<li><a href="#remove-subarea">Remove subarea</a></li>
</ul></li>
<li><a href="#keepouts">Keepouts</a><ul>
<li><a href="#invisible-keepouts">Invisible keepouts</a></li>
<li><a href="#crop-keepout-to-the-building-shape">Crop keepout to the building shape</a></li>
<li><a href="#vertical-and-inclined-keepouts">Vertical and inclined keepouts</a></li>
</ul></li>
<li><a href="#trees">Trees</a></li>
<li><a href="#drawing-with-snaps">Drawing with Snaps</a><ul>
<li><a href="#guide-lines">Guide lines</a></li>
<li><a href="#grid">Grid</a></li>
<li><a href="#context-panel">Context panel</a></li>
</ul></li>
<li><a href="#textures">Textures</a></li>
<li><a href="#shortcuts">Shortcuts</a></li>
<li><a href="#progress-bar">Progress bar</a></li>
<li><a href="#layout-coordinate-systems">Layout Coordinate Systems</a><ul>
<li><a href="#world-coordinate-system">World Coordinate System</a></li>
<li><a href="#scene-coordinate-system">Scene Coordinate System</a></li>
<li><a href="#building-coordinate-system">Building Coordinate System</a></li>
<li><a href="#area-coordinate-system">Area Coordinate System</a></li>
</ul></li>
<li><a href="#how-to-use">How to use</a><ul>
<li><a href="#api-key-and-autentication">API key and autentication</a></li>
<li><a href="#dom-element">DOM element</a></li>
<li><a href="#basic-functions">Basic functions</a><ul>
<li><a href="#createlayout">createLayout</a></li>
<li><a href="#getlayout">getLayout</a></li>
<li><a href="#listlayouts">listLayouts</a></li>
<li><a href="#loadlayout">loadLayout</a></li>
</ul></li>
<li><a href="#showcase-mode">Showcase mode</a><ul>
<li><a href="#showcase-without-camera-spin">Showcase without camera spin</a></li>
<li><a href="#showcase-with-camera-spin">Showcase with camera spin</a></li>
</ul></li>
</ul></li>
<li><a href="#3dlayout-communication-system">3DLayout Communication System</a><ul>
<li><a href="#info-events-sent-by-3dlayout">Info Events sent by 3DLayout</a><ul>
<li><a href="#zoomchanged">zoomChanged</a></li>
<li><a href="#fullscreen">fullscreen</a></li>
<li><a href="#tabchanged">tabChanged</a></li>
<li><a href="#editarea">editArea</a></li>
<li><a href="#editkeepout">editKeepout</a></li>
<li><a href="#edittree">editTree</a></li>
<li><a href="#areachanged">areaChanged</a></li>
<li><a href="#buildingchanged">buildingChanged</a></li>
<li><a href="#roofchanged">roofChanged</a></li>
<li><a href="#editroof">editRoof</a></li>
<li><a href="#editvertices">editVertices</a></li>
<li><a href="#buildingremoved">buildingRemoved</a></li>
<li><a href="#buildingselected">buildingSelected</a></li>
<li><a href="#buildingcreated">buildingCreated</a></li>
</ul></li>
<li><a href="#functions-to-retrieve-info-from-3dlayout">Functions to retrieve info from 3DLayout</a><ul>
<li><a href="#generic-functions">Generic Functions</a></li>
<li><a href="#building-related-functions">Building related functions</a></li>
<li><a href="#area-related-functions">Area related functions</a></li>
<li><a href="#subarea-related-functions">Subarea related functions</a></li>
</ul></li>
<li><a href="#functions-to-send-info-to-the-3dlayout">Functions to send info to the 3DLayout</a><ul>
<li><a href="#customalert-event">CustomAlert event</a></li>
</ul></li>
</ul></li>
<li><a href="#alert-widgets">Alert widgets</a></li>
<li><a href="#progress-bar-customization">Progress bar customization</a></li>
<li><a href="#layout-rules">Layout Rules</a><ul>
<li><a href="#scene-preferences">Scene preferences</a><ul>
<li><a href="#project">Project</a></li>
<li><a href="#development">Development</a></li>
<li><a href="#3d-canvas">3D canvas</a></li>
<li><a href="#model">Model</a></li>
<li><a href="#gui">GUI</a></li>
</ul></li>
<li><a href="#default-buttons">Default buttons</a></li>
<li><a href="#default-languages">Default languages</a></li>
<li><a href="#default-colors">Default colors</a><ul>
<li><a href="#css-colors">Css colors</a></li>
<li><a href="#building-and-roof-colors">Building and roof colors</a></li>
<li><a href="#keepout-colors">Keepout colors</a></li>
<li><a href="#area-colors">Area colors</a></li>
<li><a href="#dilatation-lines-colors">Dilatation lines colors</a></li>
<li><a href="#module-colors">Module colors</a></li>
<li><a href="#tree-colors">Tree colors</a></li>
<li><a href="#custom-colors">Custom colors</a></li>
</ul></li>
<li><a href="#default-modules">Default modules</a></li>
<li><a href="#default-providers">Default providers</a></li>
<li><a href="#default-model-values">Default model values</a><ul>
<li><a href="#default-model-area-values">Default model area values</a></li>
<li><a href="#default-model-building-values">Default model building values</a></li>
<li><a href="#default-model-keepout-values">Default model keepout values</a></li>
<li><a href="#default-model-roof-by-type-values">Default model roof by type values</a></li>
<li><a href="#default-model-roof-values">Default model roof values</a></li>
<li><a href="#default-model-subarea-by-roof-type-values">Default model subarea by roof type values</a></li>
<li><a href="#default-model-subarea-values">Default model subarea values</a></li>
<li><a href="#default-model-tree-values">Default model tree values</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="introduction">Introduction</h1>
<p>Ezzing 3DLayout is a PV planning tool that allows you to generate a 3d model of a building based on a satellite image. You can model any number of buildings, select between up to five different type of roofs, define keepouts and trees with custom heights...</p>
<p>Inside each roof area you can customize different structures, select module models and get automated previews of your setup.</p>
<p>It also provides you with a perspective view and a sun simulator to determine where the shadows will be in your installation.</p>
<p>Ezzing 3DLayout is an embebible webapp. You can integrate it inside your own system and customize many elements inside, from module models to prefered default settings for each roof type.</p>
<p>In this document you will find a brief showcase of the different areas of the app, a technical explanation on how to integrate this webapp inside your platform, a full description of the API that will allow you to communicate with the 3DLayout, and finally a description of how to customize different parts of the app.</p>
<img class="w100" src="./layout-doc-imgs/general/intro.jpg" alt="3DLayout" />
<br>

<p>You can test the app by visiting this link:</p>
<p><a href="https://layout.ezzing.com/#/demo"><a href="https://layout.ezzing.com/#/demo" class="uri">https://layout.ezzing.com/#/demo</a></a></li></p>
<div class="page-break"></div>

<h1 id="screenshots">Screenshots</h1>
<img class="w100" src="./layout-doc-imgs/general/perspective-view.jpg" alt="Perspective view" />

<p><br><br></p>
<img class="w100" src="./layout-doc-imgs/general/sun-simulation.jpg" alt="Sun simulation" />

<div class="page-break"></div>

<h1 id="3dlayout-interface">3DLayout Interface</h1>
<p>The 3DLayout interface has two diferent parts: the <strong>aside panel</strong> and the <strong>canvas area</strong>.</p>
<h2 id="aside-panel">Aside Panel</h2>
<p>In the aside panel you can find functionalities related to the current active building and other objects in the scene.</p>
<br>

<img class="w100" src="./layout-doc-imgs/tabs/tab-building.jpg" alt="Tab building" />
<br><br>
<img class="w100" src="./layout-doc-imgs/tabs/tab-areas-1.jpg" alt="Tab areas 1" />

<img class="w100" src="./layout-doc-imgs/tabs/tab-areas-2.jpg" alt="Tab areas 2" />
<br><br>
<img class="w100" src="./layout-doc-imgs/tabs/tab-keepouts.jpg" alt="Tab keepouts" />
<br><br>
<img class="w100" src="./layout-doc-imgs/tabs/tab-trees.jpg" alt="Tab trees" />

<img class="w100" src="./layout-doc-imgs/tabs/tab-preferences.jpg" alt="Tab preferences" />

<div class="page-break"></div>

<h2 id="canvas-area">Canvas Area</h2>
<p>In the canvas area you can see the satellite view and three different sets of elements: the <strong>buildings index</strong> on the top-left side, the <strong>main options buttons</strong> on the top-right, and the <strong>control buttons</strong> on the bottom-right corner.</p>
<img class="w100" src="./layout-doc-imgs/canvas/canvas.jpg" alt="Canvas" />

<div class="page-break"></div>

<h3 id="buildings-index">Buildings Index</h3>
<p>In the buildings index you can see the active building and select another one to become active. The color represented on each index is the color of the building.</p>
<img class="w200px" src="./layout-doc-imgs/canvas/buildings-index.jpg" alt="Buildings index" />

<h3 id="main-options">Main Options</h3>
<p>These are the main options in the canvas area:</p>
<img class="w100" src="./layout-doc-imgs/canvas/main-options.jpg" alt="Main options" />

<p>All these buttons are the <strong>main options custom buttons</strong>. You can customize this set of buttons by hidding some of them, by sorting them, or by adding new buttons.</p>
<p>The default custom buttons are:</p>
<ul>
<li>Save: saves the layout in crm</li>
<li>Search address: moves the project center to the address specified</li>
<li>Snapshot: takes a photograph of the project (with or without modules in jpg format, or in svg format)</li>
<li>Fullscreen</li>
<li>Sun simulation: sun and shadow simulation</li>
<li>Perspective view: switches to 2D/3D view</li>
<li>Renderer</li>
<li>Satellite provider selector (only showed if available)</li>
</ul>
<blockquote>
<p>Please, visit the section <a href="#custom-buttons">Custom Buttons</a> to learn how to add your own buttons.</p>
</blockquote>
<div class="page-break"></div>

<h3 id="control-buttons">Control Buttons</h3>
<p>These are map related buttons. You can also customize the upper section of this set of buttons by hidding some of them or by adding new buttons.</p>
<img class="w75px" src="./layout-doc-imgs/canvas/control-buttons-1.png" alt="Control buttons 1" />

<p>Fixed buttons in this area:</p>
<ul>
<li>Zoom in</li>
<li>Zoom out</li>
</ul>
<br>

<img class="w75px" src="./layout-doc-imgs/canvas/control-buttons-2.png" alt="Control buttons 2" />

<p>3D control custom buttons:</p>
<ul>
<li>Compass: centers 3D view to north</li>
<li>Geolocation: centers 3D view to the project</li>
<li>Zoom in</li>
<li>Zoom out</li>
</ul>
<blockquote>
<p>Please, visit the section <a href="#custom-buttons">Custom Buttons</a> to learn how to add your own functions.</p>
</blockquote>
<h3 id="notifications">Notifications</h3>
<p>Everytime an operation is being executed, it will appear at the top of the canvas a bar with the name of that operation. Its color represents the type of notification:</p>
<ul>
<li>Red: error</li>
<li>Orange: warning (you should wait until the operation is finished)</li>
<li>Green: success</li>
<li>Blue: info</li>
</ul>
<img class="w100" src="./layout-doc-imgs/canvas/notifications.jpg" alt="Notifications" />

<div class="page-break"></div>

<h1 id="buildings">Buildings</h1>
<h2 id="building-creation">Building creation</h2>
<p>To start using the tool you need to create your first building. You will be able to customize its shape, name or height (from gutter or ridge).</p>
<p>The 'Populated with modules' option determines if the building will be created with or without modules. It is useful to deactivate it for simulating the shadows of the buildings.</p>
<p>You can activate the modules in the building edition (this configuration will be shown everytime the layout is loaded) or enabling the corresponding area in the area section.</p>
<img class="w200px" src="./layout-doc-imgs/building/populated-with-modules-toggle.png" alt="Populated with modules toggle" />

<blockquote>
<p>Please, visit the section <a href="#drawing-with-snaps">Drawing with Snaps</a> to learn how to draw.</p>
</blockquote>
<p>The next step once you have drawn the building is configurating the roof. There are different types of roofs depending on the shape of the building (if the building is irregular, the roof can only be flat or pent).</p>
<p>These are all the types of roof (available on regular buildings):</p>
<img class="w200px" src="./layout-doc-imgs/building/roof-types.png" alt="Roof types" />

<p>Each roof is composed of a determined number of areas that are automatically created.</p>
<p>You can also choose a roof material despite it is only informative. The material options are common for all roof types (tiled, trapezoidal, and corrugated) except for the flat ones (gravel, bitumen, membrane, and concrete):</p>
<img class="w200px" src="./layout-doc-imgs/building/roof-materials.png" alt="Roof materials" />

<p>When the operation is finished, the textures of the building are generated using the mapper tool and the modules appear in a default subarea.</p>
<blockquote>
<p>Please, visit the section <a href="#textures">Textures</a> to learn how they are generated.</p>
</blockquote>
<p>Once the building is created, you will be able to:</p>
<ul>
<li>Edit</li>
<li>Move</li>
<li>Remove</li>
<li>Clone (it will be cloned with the same settings)</li>
<li>Paint</li>
</ul>
<h2 id="add-building">Add building</h2>
<p>By clicking the '+' button at the top-left of the canvas you enter in the building creation process. There is no limit on buildings to create.</p>
<h2 id="edit-building">Edit building</h2>
<p>You can select between editing the building or editing the roof.</p>
<p>In the first option you can modify the building vertices following the steps of the building creation. If you edit the roof you can select any type of roof and it will be recalculated.</p>
<!-- Fiorella - Imagen distinguiendo de algunas maneras las dos opciones -->

<img class="w200px" src="./layout-doc-imgs/building/building-edit.png" alt="Building edit" />

<div class="page-break"></div>

<h1 id="areas">Areas</h1>
<p>The areas are sections on the roof that are automatically created when selecting the type of roof.</p>
<p>Each area is composed of at least one subarea and has the information of the number of modules it contains and the power that generates.</p>
<p>If you want to disable one area, you can click on the eye button next to its name. By doing this, its module count and power generated will be set to 0.</p>
<img class="w75" src="./layout-doc-imgs/general/area-disabled.jpg" alt="Area disabled" />

<h2 id="edit-area">Edit area</h2>
<p>To edit an area you can modify the edge zone value. It is a numeric value that specifies the distance between the building limits and the subareas that exist within that area.</p>
<div class="page-break"></div>

<h1 id="subareas">Subareas</h1>
<p>A subarea is a region inside an area that allows you to define a modules installation just in a section of the area.</p>
<p>By clicking on a subarea, two views will appear: the project view (top) and the subarea view (bottom).</p>
<p>The subarea view is hidden by default. To toggle its view, you have to click on the button 'Open subarea view' or 'Close subarea view' at the bottom of the canvas.</p>
<img class="w75" src="./layout-doc-imgs/subarea/edit-subarea.jpg" alt="Subarea view" />

<blockquote>
<p>Note that when moving the subarea or changing its azimuth the subarea view will be opened. This is because this view hasn't got any deformation.</p>
</blockquote>
<h2 id="subarea-creation">Subarea creation</h2>
<p>To create a subarea click on the 'Create subarea' button.</p>
<img class="w200px" src="./layout-doc-imgs/subarea/subarea-creation-button.png" alt="Subarea creation button" />

<p>Once the subarea is created, you will be able to:</p>
<ul>
<li>Edit</li>
<li>Move</li>
<li>Refresh</li>
<li>Remove (only if the area has more than one subarea)</li>
<li>Clone (it will be cloned with the same settings)</li>
</ul>
<img class="w200px" src="./layout-doc-imgs/subarea/remove-add-subareas.png" alt="Remove add subareas" />

<p>If you want to disable one subarea, you can click on the eye button next to its name. By doing this, its module count and power generated will be set to 0.</p>
<div class="page-break"></div>

<h2 id="add-subarea">Add subarea</h2>
<p>By clicking the 'Create subarea' button you enter in the subarea creation process.</p>
<p>If you create the first subarea it will replace the default one.</p>
<img class="w75" src="./layout-doc-imgs/subarea/add-subarea.jpg" alt="Add subarea" />

<h3 id="crop-subarea-to-the-area-shape">Crop subarea to the area shape</h3>
<p>When editing the vertices of a subarea you can check the 'Crop' option. This helps you to draw subareas that extends to the border of the building with more precision.</p>
<img class="w200px" src="./layout-doc-imgs/subarea/crop-shape-building-toggle.png" alt="Crop shape building toggle" />

<p>If you uncheck this option then the subarea can extend outside the area, following the area plane.</p>
<img class="w75" src="./layout-doc-imgs/subarea/subarea-sample.jpg" alt="Subarea sample" />

<h3 id="edit-subarea-vertices">Edit subarea vertices</h3>
<p>By clicking this button you can modify subarea vertices and the subarea will be recalculated.</p>
<div class="page-break"></div>

<h2 id="edit-subarea">Edit subarea</h2>
<p>By clicking on a subarea you enter in the subarea edition process.</p>
<img class="w75" src="./layout-doc-imgs/subarea/edit-subarea.jpg" alt="Edit subarea" />

<p>You will be able to refresh, paint or move all the modules.</p>
<p>These are all the subarea edition options:</p>
<ul>
<li>Module model: there are different module models available that have different size, weight and watt peak capacity</li>
<li>Module orientation: you can choose between 'landscape' and 'portrait'</li>
<li>Panels orientation: you can choose between 'south' and 'east/west'</li>
<li>Module inclination</li>
<li>Distance between modules</li>
<li>Distance between rows</li>
<li>Distance between centers</li>
<li>Use max. shadow calculation: calculates the distance between rows and centers depending on the module inclination</li>
<li>Azimuth: modules rotation</li>
<li>Staggered enabled</li>
<li>Dilatation lines enabled</li>
</ul>
<p>Here, you can click on any module to enable/disable it. If you right click on a module it will be displayed its position (row and column).</p>
<h2 id="remove-subarea">Remove subarea</h2>
<p>By clicking this button you can remove a single subarea from the subareas list. It is only available if there exists more than one subarea.</p>
<div class="page-break"></div>

<h1 id="keepouts">Keepouts</h1>
<p>Keepouts are created for simulating any obstacle that might interrupt the installation of modules.</p>
<p>When a keepout is created, there can't be any module that occupies the same position.</p>
<p>You can customize them by changing their height, offset and type (vertical or inclined).</p>
<!-- FIX

## Keepout height calculations

When creating keepouts, please note the height selected for the keepout is not always the final keepout height.

Depending on the roof inclination and the keepout dimensions and positions, there is a minimum keepout height to avoid keepouts under the roof surface.
Let's see an example:

<img class="w100" src="./layout-doc-imgs/keepout/keeoput-height-scheme.jpg" alt="keeoput-height-scheme" />

In keepout 1, A is the desired height, and B is the minimum height for this keepout. As A is bigger than B then the keepout is created with the desired height (A).

In keepout 2, A is also the desired height, but the keepout can't be drawn correctly if the height is less than B measure, as some parts of the keepout will stay below the roof, so keepout 2 will be created with the minimum calculated height (B).
-->

<blockquote>
<p>Note that for flat roofs it is posible to create 0 height keepouts, but for inclinated roofs you need to use the invisible keepouts feature to allow keepouts at roof surface level.</p>
</blockquote>
<h2 id="invisible-keepouts">Invisible keepouts</h2>
<p>If you want to simulate a skylight or any keepout object without drawing the 3D volume you can check the 'Invisible keepout' option to hide the 3D volume but still taking the obstacle into account.</p>
<img class="w200px" src="./layout-doc-imgs/keepout/invisible-keepout-toggle.png" alt="Invisible keepout toggle" />

<h2 id="crop-keepout-to-the-building-shape">Crop keepout to the building shape</h2>
<p>When editing the vertices of a keepout you can check the 'Crop shape to building limits' option. This helps you to draw keepouts that extends to the border of the building with more precision.</p>
<img class="w200px" src="./layout-doc-imgs/keepout/crop-shape-keepout-toggle.png" alt="Crop shape keepout toggle" />

<p>If you uncheck this option then the keepout can be floating outside the building limits. At least one vertex of the keepout should be inside the building limits to be created.</p>
<h2 id="vertical-and-inclined-keepouts">Vertical and inclined keepouts</h2>
<p>You can create a keepout as vertical or inclined. If the keepout is inclined, it will be created starting from the inclination of the building.</p>
<div class="page-break"></div>

<h1 id="trees">Trees</h1>
<p>Trees belong to the scene, not to a building.</p>
<p>It is important to create trees for simulating the shadows on the roofs. Therefore, you will be able to move them and modify their height and radius. The shape of the tree is calculated according to the proportion of these values.</p>
<img class="w75" src="./layout-doc-imgs/general/tree.jpg" alt="Tree" />

<div class="page-break"></div>

<h1 id="drawing-with-snaps">Drawing with Snaps</h1>
<p>The snap is a helpful tool for drawing buildings, subareas and keepouts.</p>
<p>There are two ways for drawing points: using <strong>guide lines</strong> or a <strong>grid</strong>.</p>
<h2 id="guide-lines">Guide lines</h2>
<p>'Guide lines' is the default option when drawing. There are two ways for drawing points that can be combined to make the process easier: lines and vertices.</p>
<img class="w100px" src="./layout-doc-imgs/snaps/snap-guide-lines.png" alt="Snap guide lines" />

<p>To use them, you need first to draw two points. Once you have drawn them, there will appear parallel and perpendicular guide lines to the last drawn point. This way you can create regular shapes with right angles (it is also possible to move points along these guide lines).</p>
<p>Switching to the 'Vertices' option allows you to draw points at the intersections of the guide lines and the vertices of the buildings.</p>
<blockquote>
<p>Please, visit the section <a href="#context-panel">Context panel</a> to see more drawing features.</p>
</blockquote>
<h2 id="grid">Grid</h2>
<p>When selecting this option appears a grid that occupies the entire canvas area.</p>
<img class="w100px" src="./layout-doc-imgs/snaps/snap-grid.png" alt="Snap grid" />

<p>You can customize it by specifying a number for the grid size (size of each square) and an offset in the x and y coordinates for moving the grid.</p>
<blockquote>
<p>Please, visit the section <a href="#context-panel">Context panel</a> to see more drawing features.</p>
</blockquote>
<div class="page-break"></div>

<h2 id="context-panel">Context panel</h2>
<p>This menu is available in both options, guide lines and grid, by right clicking on a point or edge.</p>
<img class="w100px" src="./layout-doc-imgs/snaps/context-panel.jpg" alt="Context panel" />

<p>When right clicking a point, you can:</p>
<ul>
<li>Draw guides here (only in 'Guide lines' option): draws parallel and perpendicular guide lines to this point in relation to the selected edge</li>
<li>Remove all guides (only in 'Guide lines' option): removes all guide lines except the ones to the selected point</li>
<li>Select/deselect point: this is useful for moving many points along a guide line at once</li>
<li>Deselect all points: deselects all points except the last selected one</li>
<li>Delete point</li>
</ul>
<p>When right clicking an edge (only in 'Guide lines' option), you can:</p>
<ul>
<li>Select/deselect edge as guide: redraws the parallel and its perpendicular guide lines to the selected edge</li>
<li>Select/deselect all edges as guide</li>
</ul>
<p>It is also available by right clicking on a module in the subarea view.</p>
<img class="w100px" src="./layout-doc-imgs/snaps/context-panel-module.jpg" alt="Context panel module" />

<p>By doing this, it will display:</p>
<ul>
<li>The position of the module (column and row)</li>
<li>Its index position in the row</li>
<li>Its index position in the column</li>
</ul>
<p>If dilatation lines are disabled, there are also two buttons to:</p>
<ul>
<li>Change row modules orientation</li>
<li>Add row offset</li>
</ul>
<div class="page-break"></div>

<h1 id="textures">Textures</h1>
<p>The textures are images obtained from the satellite displayed on the roof, with the same size and position.</p>
<p>They are generated by default when a building is created. You can disable their automatic creation in the Preferences panel.</p>
<img class="w200px" src="./layout-doc-imgs/general/building-textures-toggle.png" alt="Building textures toggle" />

<blockquote>
<p>Please, visit the section <a href="#layout-rules">Layout Rules</a> to learn how to customize this property.</p>
</blockquote>
<img class="w200px" src="./layout-doc-imgs/general/textures.png" alt="Textures" />

<p>In the building panel you can see the different options for the satellite image textures:</p>
<ul>
<li>'+' : adds satellite texture for the active building</li>
<li>Refresh (available when the active building has textures)</li>
<li>Remove (available when the active building has textures)</li>
<li>Generate for all buildings</li>
<li>Remove all satellite textures</li>
</ul>
<blockquote>
<p>Note that the textures generation might fail because of the speed of the internet connection or the speed of response of the satellite image provider. For preventing the failure you can select each building and wait for the satellite images to load or refresh the textures individually.</p>
</blockquote>
<div class="page-break"></div>

<h1 id="shortcuts">Shortcuts</h1>
<p>The shortcuts can be used in the following cases:</p>
<ul>
<li>To navigate between tabs, press 1, 2, 3 or 4</li>
<li>When drawing:
<ul>
<li>To enable/disable snap to guides, press 'S'</li>
<li>To toggle between guide lines and vertices you can hold 'Ctrl' / '⌘'</li>
<li>To select/deselect vertices, click on them while pressing 'Shift'</li>
</ul></li>
<li>Editing a subarea:
<ul>
<li>Hold 'Shift' for selecting the hole row</li>
<li>Hold 'Ctrl' / '⌘' for selecting the hole column</li>
</ul></li>
<li>Moving a building, subarea or keepout:
<ul>
<li>Down: Numpad 1, 2, 3 | 'End' | 'Down arrow' | 'Page down'</li>
<li>Left: Numpad 1, 4, 7 | 'End' | 'Left arrow' | 'Home'</li>
<li>Right: Numpad 3, 6, 9 | 'Page down' | 'Right arrow' | 'Page up'</li>
<li>Center: Numpad 5 | 'Clear'</li>
</ul></li>
<li>Save: for saving the project in crm you can press 'Ctrl + Shift + S' / '⌘ + Shift + S'</li>
<li>Widgets:
<ul>
<li>To cancel the operation or close the widget, press 'Esc'</li>
<li>To confirm the operation, press 'Enter'</li>
</ul></li>
</ul>
<p>Anyways, these shortcuts will be displayed on a widget, so you can consult them when necessary.</p>
<img class="w100px" src="./layout-doc-imgs/subarea/move-subarea-widget.png" alt="Move subarea shortcuts widget" />

<blockquote>
<p>For users with Mac operating system, Ctrl key in shortcuts will be disabled using the Command key instead (⌘).</p>
</blockquote>
<div class="page-break"></div>

<h1 id="progress-bar">Progress bar</h1>
<p>Everytime a long operation is being executed, it will be displayed a progress bar to inform the user.</p>
<p>The progress bar it's composed of:</p>
<ul>
<li>Title: name of the operation being executed</li>
<li>Label 1: function withing the operation</li>
<li>Label 2: step of the funcion</li>
<li>Bar: if there is a determinate number of steps it will be increasing its value, if not, it will be shown as an animation</li>
</ul>
<img class="w75" src="./layout-doc-imgs/general/progress-bar-textures.jpg" alt="Generating textures progress bar" />

<blockquote>
<p>Please, visit the section <a href="#progress-bar-customization">Progress bar customization</a> to learn how to customize the progress bar.</p>
</blockquote>
<div class="page-break"></div>

<h1 id="layout-coordinate-systems">Layout Coordinate Systems</h1>
<p>The 3DLayout works in four different coordinate systems, depending on which context we are requesting info.</p>
<h2 id="world-coordinate-system">World Coordinate System</h2>
<img class="w75" src="./layout-doc-imgs/coords/world-coords.png" alt="world-coords" />

<p>World coordinate system works with spherical coordinates, latitude and longitude.</p>
<p>The values stored in this system and the API calls to retrieve this data are:</p>
<ul>
<li>Layout project center &gt; getLayout</li>
</ul>
<div class="page-break"></div>

<h2 id="scene-coordinate-system">Scene Coordinate System</h2>
<img class="w75" src="./layout-doc-imgs/coords/scene-coords.png" alt="scene-coords" />

<p>Scene coordinate system works with cartesian coords, with origin in the layout project center and distances measured in meters. It is used to place each building relative to the project center.</p>
<p>The values stored in this system and the API calls to retrieve this data are:</p>
<ul>
<li>Building data center &gt; getBuildingInfo()</li>
</ul>
<div class="page-break"></div>

<h2 id="building-coordinate-system">Building Coordinate System</h2>
<img class="w75" src="./layout-doc-imgs/coords/building-coords.png" alt="building-coords" />

<p>Building coordinate System works with cartesian coords, with origin in the building center and measured in meters. Al tilted surfaces are represented in ortographic view.</p>
<p>The values stored in this system and the API calls to retrieve this data are:</p>
<ul>
<li>Building vertices (verticesMCoords) &gt; getBuildingInfo()</li>
</ul>
<div class="page-break"></div>

<h2 id="area-coordinate-system">Area Coordinate System</h2>
<img class="w75" src="./layout-doc-imgs/coords/area-coords.png" alt="area-coords" />

<p>Area Coordinate System works in cartesian coords, with origin in the bottom-left corner of the area, and rotated with the exterior wall azimuth of the area. On flat roofs the first wall drawed is considered the main wall.</p>
<p>The values stored in this system and the API calls to retrieve this data are:</p>
<ul>
<li>Area vertices (verticesMCoords) &gt; getAreaInfo()</li>
<li>Area offset vertices (verticesOffsetMCoords) &gt; getAreaInfo()</li>
<li>Area modules coords (modulesData (x/y)) &gt; getAreaInfo()</li>
</ul>
<p>This is the same for subareas, just using <strong>getSubareaInfo</strong></p>
<div class="page-break"></div>

<h1 id="how-to-use">How to use</h1>
<h2 id="api-key-and-autentication">API key and autentication</h2>
<p>The 3DLayout allows you to provide Google and Bing API keys.</p>
<p>In case these API keys don't exist, the default provider will be Open Street Maps.</p>
<p>To add them as layout rules, please visit the <a href="#scene-preferences">Scene preferences</a> section within the <a href="#layout-rules">Layout Rules</a> section.</p>
<h2 id="dom-element">DOM element</h2>
<p>You need an element in the body of your html page, a div where <strong>the 3DLayout will fit inside this element</strong>.</p>
<blockquote>
<p>This div can't be bigger than the view size, and <strong>no scroll</strong> has to be applied to the html page.</p>
</blockquote>
<p>You should not change the ezzing3d element size (width or height) but change the size of this container div.</p>
<pre><code>&lt;div style=&#39;height:100vh; width: 100vw&#39;&gt;
    &lt;ezzing3d id=&#39;ezzing3d&#39;&gt;&lt;/ezzing3d&gt;
&lt;/div&gt;
</code></pre>
<h2 id="basic-functions">Basic functions</h2>
<p>Adding the <code>client.min.js</code> script with a valid API key makes available the <code>Ezzing3DClient</code> global object, which we will use to start using the 3DLayout.</p>
<p>The Ezzing3DClient object has the following functions:</p>
<ul>
<li>createLayout</li>
<li>getLayout</li>
<li>listLayouts</li>
<li>loadLayout</li>
<li>destroyLayout</li>
</ul>
<h3 id="createlayout">createLayout</h3>
<p>Create a new layout with the specified information.</p>
<pre><code>var data = {
    title: &quot;EzzingSolar&quot;,
    latitude: 40.428121,
    longitude: -3.698695,
    address: &quot;Calle de Sagasta, 18&quot;,
    zip: &quot;28004&quot;,
    city: &quot;Madrid&quot;,
    province: &quot;Madrid&quot;,
    country: &quot;Spain&quot;
};
</code></pre>
<p>Where all values are optional except latitude and longitude that are required.</p>
<pre><code>Ezzing3DClient.createLayout(data, function(err, layoutData) {
    if (err) throw err;
    console.log(layoutData);
});
</code></pre>
<p>Which will return the information from the created layout:</p>
<pre><code>{
  id: 1093,
  title: &quot;EzzingSolar&quot;,
  address: &quot;Calle de Sagasta, 18&quot;,
  zip: &quot;28004&quot;,
  city: &quot;Madrid&quot;,
  province: &quot;Madrid&quot;,
  country: &quot;Spain&quot;,
  latitude: &quot;40.428121&quot;,
  longitude: &quot;-3.698695&quot;,
  created_at: &quot;2016-08-18T17:15:15+0000&quot;,
  updated_at: &quot;2016-08-19T10:14:34+0000&quot;,
  url: &quot;https://layout.ezzing.com/#/GXXlgzDk0rPsrdxWfDsE5Cdi9FwUrBPx7GfuxSf0::1093&quot;
}
</code></pre>
<p>where:</p>
<ul>
<li><strong>id</strong>: the layout id, you need this id to load the project or retrieve information,</li>
<li><strong>title</strong>: A title for the project,</li>
<li><strong>address</strong>: the address</li>
<li><strong>city</strong>: the city,</li>
<li><strong>province</strong>: the province,</li>
<li><strong>country</strong>: the contry,</li>
<li><strong>zip</strong>: the zip code,</li>
<li><strong>latitude</strong>: latitude value in decimal degrees (remember to include the negative sign for south and west coordinates) ,</li>
<li><strong>longitude</strong>:longitude value in decimal degrees (remember to include the negative sign for south and west coordinates),</li>
<li><strong>created_at</strong>: creation date,</li>
<li><strong>updated_at</strong>: modification date,</li>
<li><strong>url</strong>: an url to visit the project or embed it as an iframe</li>
</ul>
<blockquote>
<p>The url can be used to embed a readonly version of the project. You can read a description of this methods in the <a href="#showcase-mode">Showcase mode</a> section.</p>
</blockquote>
<p>The data types in which each value is stored are:</p>
<ul>
<li><strong>id</strong>: integer</li>
<li><strong>title</strong>: string 255 chars</li>
<li><strong>address</strong>: string 255 chars</li>
<li><strong>city</strong>: string 255 chars</li>
<li><strong>province</strong>: string 255 chars</li>
<li><strong>country</strong>: string 255 chars</li>
<li><strong>zip</strong>: string 255 chars</li>
<li><strong>latitude</strong>: decimal (+/-)xx.yyyyyyyy (max. precision 8 decimal digits)</li>
<li><strong>longitude</strong>: decimal (+/-)xxx.yyyyyyyy (max. precision 8 decimal digits)</li>
<li><strong>created_at</strong>: ISO8601</li>
<li><strong>updated_at</strong>: ISO8601</li>
<li><strong>url</strong>: string 2000 chars</li>
</ul>
<h3 id="getlayout">getLayout</h3>
<p>Returns the information of a layout related to the given id</p>
<pre><code>Ezzing3DClient.getLayout(layoutId, function(err, layoutData, container) {
    if (err) throw err;
    console.log(layoutData);
});
</code></pre>
<h3 id="listlayouts">listLayouts</h3>
<p>Returns a list of all your created layouts.</p>
<pre><code>Ezzing3DClient.listLayouts(function(err, layoutData) {
    if (err) throw err;
    console.log(layoutData);
});
</code></pre>
<h3 id="loadlayout">loadLayout</h3>
<p>Sets up the 3DLayout interface into the ezzing3D container and loads the project related to the given id.</p>
<pre><code>Ezzing3DClient.loadLayout(layoutId, function(err, layoutApi, container) {
    if (err) throw err;
});
</code></pre>
<p>loadLayout can receive an <code>options</code> argument where you can setup some customizations.</p>
<blockquote>
<p>You can read a description of this methods in the <a href="#layout-rules">Layout Rules</a> section.</p>
</blockquote>
<pre><code>var rules = {};

Ezzing3DClient.loadLayout(layoutId, rules, function(err, layoutApi, container) {
    if (err) throw err;
});
</code></pre>
<p>This method returns two objects, where:</p>
<ul>
<li>layout: Exposes an object with methods to interact with the 3DLayout.</li>
</ul>
<blockquote>
<p>You can read a description of this methods in the <a href="#dlayout-communication-system">3DLayout Communication System</a> section.</p>
</blockquote>
<ul>
<li>container: the DOM element where the 3DLayot is created.</li>
</ul>
<h2 id="showcase-mode">Showcase mode</h2>
<p>If you want to show the layout to a customer or embed it in read-only mode in another page of your platform (to act as a thumbnail of the project) you can do it by adding an iframe element to an html page, with a modified version of the url of the layout.</p>
<h3 id="showcase-without-camera-spin">Showcase without camera spin</h3>
<pre><code>&lt;iframe src=(url + &quot;/showcase&quot;)&gt; &lt;/iframe&gt;
</code></pre>
<p>In this mode the 3DLayout will show the project in perspective mode without any gui elements and a quiet 3d view. You can click and drag with the mouse to rotate the view and zoom with the mouse wheel.</p>
<h3 id="showcase-with-camera-spin">Showcase with camera spin</h3>
<pre><code>&lt;iframe src=(url + &quot;/spin-showcase&quot;)&gt; &lt;/iframe&gt;
</code></pre>
<p>In this mode the 3DLayout will show the project in perspective mode without any gui elements and a rotating 3d view. You can click and drag with the mouse to rotate the view and zoom with the mouse wheel. Once clicked the rotation will stop.</p>
<h1 id="3dlayout-communication-system">3DLayout Communication System</h1>
<h2 id="info-events-sent-by-3dlayout">Info Events sent by 3DLayout</h2>
<p>The 3DLayout triggers different events to report actions when they are accomplished or to inform on GUI changes.</p>
<p>An example on how to listen this events:</p>
<pre><code>var container = window.document.getElementById(&#39;ezzing3d&#39;);

container.addEventListener(&quot;buildingSelected&quot;, function(event, data){
    console.log(event.detail);
});
</code></pre>
<p>The full list of events emmited by the 3DLayout are:</p>
<!-- * load -->

<ul>
<li>zoomChanged</li>
<li>fullscreen</li>
<li>tabChanged</li>
<li>editArea</li>
<li>editKeepout</li>
<li>editTree</li>
<li>areaChanged</li>
<li>buildingChanged</li>
<li>roofChanged</li>
<li>editRoof</li>
<li>editVertices</li>
<li>buildingRemoved</li>
<li>buildingSelected</li>
<li>buildingCreated</li>
<li>customAlertOk</li>
</ul>
<!--  
### load

This event is triggered when the 3DLayout finish to load the project from the CRM
-->

<h3 id="zoomchanged">zoomChanged</h3>
<p>This event is triggered when the zoom is changed in the canvas. It sends the zoom level value.</p>
<h3 id="fullscreen">fullscreen</h3>
<p>This event is triggered when the user changes from normal view to fullscreen. It sends <strong>true</strong> when changing to fullscreen and <strong>false</strong> when disabling fullscreen mode.</p>
<h3 id="tabchanged">tabChanged</h3>
<p>This event is triggered every time the user changes the aside panel navigation tab. It sends a string with the current tab name, the values can be one of this: [ &quot;building&quot;, &quot;areas&quot;, &quot;keepouts&quot;, &quot;trees&quot; ].</p>
<h3 id="editarea">editArea</h3>
<p>This event is triggered every time the user enters the edit section of an area. The event sends the <strong>area.id</strong>.</p>
<h3 id="editkeepout">editKeepout</h3>
<p>This event is triggered every time the user enters the edit section of a keepout. The event sends the <strong>keepout.id</strong>.</p>
<h3 id="edittree">editTree</h3>
<p>This event is triggered every time the user enters the edit section of a tree. The event sends the <strong>tree.id</strong>.</p>
<h3 id="areachanged">areaChanged</h3>
<p>This event is triggerd every time an area attribute is changed. The event sends back an array with this info:</p>
<pre><code>[area.id, attribute, value]
</code></pre>
<h3 id="buildingchanged">buildingChanged</h3>
<p>This event is triggered every time a building is changed. The event sends back an array with this info:</p>
<pre><code>[building.id, building attribute, value]
</code></pre>
<h3 id="roofchanged">roofChanged</h3>
<p>This event is triggered every time a roof attribute is changed. The event sends back an array with this info:</p>
<pre><code>[building.id, roof attribute, value]
</code></pre>
<h3 id="editroof">editRoof</h3>
<p>This event is triggered every time the user enters the roof edit section of a building. The event sends the <strong>building.id</strong></p>
<h3 id="editvertices">editVertices</h3>
<p>This event is triggered every time the user enters the vertices edit section of a building. The event sends the <strong>building.id</strong></p>
<h3 id="buildingremoved">buildingRemoved</h3>
<p>This event is triggered every time a building is deleted. The event sends the <strong>building.id</strong> (after this operation this building won't longer exist in the project)</p>
<h3 id="buildingselected">buildingSelected</h3>
<p>This event is triggered every time a new building becomes active. The event sends the <strong>building.id</strong></p>
<h3 id="buildingcreated">buildingCreated</h3>
<p>This event is triggered every time a new building is created. The event sends the <strong>building.id</strong></p>
<!-- ### customAlertOk

This event is triggered when the user confirm a custom alert dialog.

> You can read a description of this methods in the [Layout Rules](#layout-rules) section. -->

<h2 id="functions-to-retrieve-info-from-3dlayout">Functions to retrieve info from 3DLayout</h2>
<p>There is a set of functions to retrieve information from the 3DLayout.</p>
<p>For all these functions you can pass a callback as an argument to be executed when data is retrieved.</p>
<h3 id="generic-functions">Generic Functions</h3>
<p>Set of generic functions to retrieve project information from the layout. You just need to pass the <strong>callback</strong>, no other arguments are needed.</p>
<ul>
<li>getCurrentBuildingId</li>
<li>getLayoutData</li>
<li>getNumberOfModules</li>
<li>getTotalPower</li>
<li>getPower</li>
</ul>
<h4 id="getcurrentbuildingid">getCurrentBuildingId</h4>
<pre><code>layout.getCurrentBuildingId(callback);
</code></pre>
<p>This function returns the id value of the current active building.</p>
<h4 id="getlayoutdata">getLayoutData</h4>
<pre><code>layout.getLayoutData(callback);
</code></pre>
<p>This function returns a JSON with an array of buildings.</p>
<p>Each building in the array contains:</p>
<pre><code>{
    id: the building id,
    name: the building name,
    areas: an array of areas in the building
}
</code></pre>
<p>Each area in the areas array contains:</p>
<pre><code>{
    id: the area id,
    name: the area name,
    subareas: an array of subareas in the area
}
</code></pre>
<p>Each subarea in the subareas array contains:</p>
<pre><code>{
    id: the subarea id,
    name: the subarea name
}
</code></pre>
<h4 id="getnumberofmodules">getNumberOfModules</h4>
<pre><code>layout.getNumberOfModules(callback);
</code></pre>
<p>This function returns a JSON with an array of buildings.</p>
<p>Each building in the array contains:</p>
<pre><code>{
    id: the building id,
    name: the building name,
    modules: total of modules in the building
    areas: an array of areas in the building
}
</code></pre>
<p>Each area in the areas array contains:</p>
<pre><code>{
    id: the area id,
    name: the area name,
    modules: total of modules in the area,
    subareas: an array of subareas in the area
}
</code></pre>
<p>Each subarea in the subareas array contains:</p>
<pre><code>{
    id: the subarea id,
    name: the subarea name,
    modules: total of modules in the subarea
}
</code></pre>
<h4 id="gettotalpower">getTotalPower</h4>
<pre><code>layout.getTotalPower(callback);
</code></pre>
<p>Returns the total power for all the buildings in the project.</p>
<h4 id="getpower">getPower</h4>
<pre><code>layout.getPower(callback);
</code></pre>
<p>Returns an array of all buildings in the project.</p>
<p>Each building in the array contains:</p>
<pre><code>{
    id: the building id,
    name: the building name,
    power: the total power for this building,
    areas: array of areas in this building
}
</code></pre>
<p>Each area in the areas array contains:</p>
<pre><code>{
    id: the area id,
    name: the area name,
    power: total power in this area,
    subareas: an array of subareas in the area
}
</code></pre>
<p>Each subarea in the subareas array contains:</p>
<pre><code>{
    id: the subarea id,
    name: the subarea name,
    power: total power in this subarea
}
</code></pre>
<h3 id="building-related-functions">Building related functions</h3>
<p>Set of generic functions to retrieve building related information from the layout. In this set of functions you should pass an existing building id and a callback.</p>
<ul>
<li>getBuildingInfo</li>
<li>getRoofInfo</li>
<li>getBuildingPosition</li>
</ul>
<h4 id="getbuildinginfo">getBuildingInfo</h4>
<pre><code>layout.getBuildingInfo(id, callback);
</code></pre>
<p>Returns building information for a given building.id</p>
<p>The data returned is:</p>
<pre><code>{
    id: the building id,
    name: the building name,
    height: building height (in meters),
    regular: true if building angles are all equal to 90º, false otherwise.
    buildingArea: building area measure (in square meters),
    centerDeg: building center in World coordinate system,
    centerMCoords: building center in Scene coordinate system,
    vertices: building vertices in world coordinate system  [DEPRECATED],
    verticesMCoords: building vertices in building coordinate system,
    modules: total of modules in the building
    power: total power of the building,
    areas: array of areas in this building
}
</code></pre>
<p>Each area in the areas array contains:</p>
<pre><code>{
    id: the area id,
    name: the area name,
    subareas: an array of subareas in the area
}
</code></pre>
<p>Each subarea in the subareas array contains:</p>
<pre><code>{
    id: the subarea id,
    name: the subarea name
}
</code></pre>
<h4 id="getroofinfo">getRoofInfo</h4>
<pre><code>layout.getRoofInfo(id, callback);
</code></pre>
<p>Returns roof information for a given building.id]</p>
<p>The data returned is:</p>
<pre><code>{
    height: roof height (in meters, not including building height),
    inclination: roof angle (in degrees),
    material: roof material (i.e: tiled/corugated),
    orientation: roof orientation (i.e: east/west or nort/south),
    type: roof type (i.e: flat, pent, gabled, etc...)
}
</code></pre>
<h4 id="getbuildingposition">getBuildingPosition</h4>
<pre><code>layout.getBuildingPosition(id, callback);
</code></pre>
<p>Returns building position info for a given building.id.</p>
<p>The data returned is:</p>
<pre><code>{
    center: building center in world coord system [DEPRECATED],
    vertices: array of building vertices, world coord system [DEPRECATED],
    centerDeg: building center in World coord system,
    centerMCoords: building center in Scene coord system,
    verticesMCoords: building vertices in building coord system,
}
</code></pre>
<h3 id="area-related-functions">Area related functions</h3>
<p>Set of generic functions to retrieve Area related information from the layout. In this set of functions you should pass an existing area id and a callback.</p>
<ul>
<li>getAreaInfo</li>
<li>getModuleInfoByArea</li>
<li>getModulesStructureByArea</li>
<li>getAreaOffset</li>
</ul>
<h4 id="getareainfo">getAreaInfo</h4>
<pre><code>layout.getAreaInfo(id, callback);
</code></pre>
<p>Returns area info for a given area.id.</p>
<p>The data returned is:</p>
<pre><code>{
    id: the area id,
    name: the area name,
    offset: the area offset,
    placement: placement (i.e: portrait / landscape),
    structure: i.e: east-west / standard,
    inclination: modules inclination (in degrees),
    azimuth: modules azimuthal inclination (in degrees),
    areaMCoords: array with area vertices coordinates in Area system coords [DEPRECATED],
    areaOffsetMCoords: array with offseted area vertices in Area system coords [DEPRECATED],
    verticesMCoords: array with area vertices coordinates in Area system coords,
    verticesOffsetMCoords: array with offseted area vertices in Area system coords,
    wallSizes: size in meters for each area wall,
    wallAzimuth: azimuthal angle for the external area wall,
    power: total power of the area,
    subareas: an array of subareas in the area
}
</code></pre>
<p>Each subarea in the subareas array contains:</p>
<pre><code>{
    id: the subarea id,
    name: the subarea name
}
</code></pre>
<h4 id="getmoduleinfobyarea">getModuleInfoByArea</h4>
<pre><code>layout.getModuleInfoByArea(id, callback);
</code></pre>
<p>Returns module info for a given area.id.</p>
<p>The data returned is:</p>
<pre><code>{
    id: the module id,
    name: the module model name,
    reference: extra model information,
    width: the width of the module (in meters),
    height: the height of the module (in meters),
    length: the lenght of the module (in meters),
    power: the power of the module
}
</code></pre>
<h4 id="getmodulesstructurebyarea">getModulesStructureByArea</h4>
<pre><code>layout.getModulesStructureByArea(id, callback);
</code></pre>
<p>Returns a JSON with an array of modules for a given area.id.</p>
<p>The data for each module in the array is:</p>
<pre><code>{
    x: x position of the module in Area system coords,
    y: y position of the module in Area system coords,
    col: column to which the module belongs,
    row: row to which the module belongs,,
    rX: rotation of the module in the X axis (inclination),
    rZ: rotation of the module in the Z axis (azimuth),
    color: the color of the module (only exist if color is not default),
}
</code></pre>
<h4 id="getareaoffset">getAreaOffset</h4>
<pre><code>layout.getAreaOffset(id, offset, callback);
</code></pre>
<p>Returns an array of vertices containing the offseted area for a given area.id and offset.</p>
<p>If the offset is a negative value, then the area is reduced by the offset value (in meters).</p>
<h3 id="subarea-related-functions">Subarea related functions</h3>
<p>Set of generic functions to retrieve Area related information from the layout. In this set of functions you should pass an existing area id and a callback.</p>
<ul>
<li>getSubareaInfo</li>
<li>getModuleInfoBySubarea</li>
<li>getModulesStructureBySubarea</li>
</ul>
<h4 id="getsubareainfo">getSubareaInfo</h4>
<pre><code>layout.getSubareaInfo(id, callback);
</code></pre>
<p>Returns subarea info for a given subarea.id.</p>
<p>The data returned is:</p>
<pre><code>{
    id: the subarea id,
    name: the subarea name,
    offset: the subarea offset,
    placement: placement (i.e: portrait / landscape),
    structure: i.e: east-west / standard,
    inclination: modules inclination (in degrees),
    azimuth: modules azimuthal inclination (in degrees),
    verticesMCoords: array with subarea vertices coordinates in Area system coords,
    verticesOffsetMCoords: array with offseted subarea vertices in Area system coords,
    wallSizes: size in meters for each subarea wall,
    wallAzimuth: azimuthal angle for the external area wall,
    power: total power of the subarea,
}
</code></pre>
<h4 id="getmoduleinfobysubarea">getModuleInfoBySubarea</h4>
<pre><code>layout.getModuleInfoBySubarea(id, callback);
</code></pre>
<p>Returns module info for a given subarea.id.</p>
<p>The data returned is:</p>
<pre><code>{
    id: the module id,
    name: the module model name,
    reference: extra model information,
    width: the width of the module (in meters),
    height: the height of the module (in meters),
    length: the lenght of the module (in meters),
    power: the power of the module
}
</code></pre>
<h4 id="getmodulesstructurebysubarea">getModulesStructureBySubarea</h4>
<pre><code>layout.getModulesStructureBySubarea(id, callback);
</code></pre>
<p>Returns a JSON with an array of modules for a given subarea.id.</p>
<p>The data for each module in the array is:</p>
<pre><code>{
    x: x position of the module in Area system coords,
    y: y position of the module in Area system coords,
    col: column to which the module belongs,
    row: row to which the module belongs,,
    rX: rotation of the module in the X axis (inclination),
    rZ: rotation of the module in the Z axis (azimuth),
    color: the color of the module (only exist if color is not default),
}
</code></pre>
<h2 id="functions-to-send-info-to-the-3dlayout">Functions to send info to the 3DLayout</h2>
<h3 id="customalert-event">CustomAlert event</h3>
<p>You can send this event to show an alert with some information to the user at any time.</p>
<pre><code>layout.customAlert(title_text_string, body_text_string, callback);
</code></pre>
<!--
## Functions to set values in to the project

Set of functions to change values inside the project. There are two types:

* setAreaAttribute
* setBuildingAttribute

### setAreaAttribute

With this function you can change this area attributes:

* model
* placement
* structure
* inclination
* useShadowsCalculation
* inset.x
* inset.y
* totalInset.x
* totalInset.y
* offset
* azimuth

    var id = "aaa060bf-cae0-41b0-9fd2-c234262ea710";
    var field = "structure";
    var value = "Standard";

    scope.$emit("setAreaAttribute", [id, field, value]);
    scope.$emit("setAreaAttribute", [id, 'inclination', 45]);
    scope.$emit("setAreaAttribute", [id, 'inset.y', 0.0034]);
    scope.$emit("setAreaAttribute", [id, 'azimuth', 45]);

### setBuildingAttribute

With this function you can change this building fields

* name
* height
* roof.inclination
* roof.material


    var id = "64a1f446-a552-4aef-bed3-5268b62610a6";

    var value = 75;
    var field = "roof.inclination";
    scope.$emit("setBuildingAttribute", [id, field, value]);

    var value = 20;
    var field = "height";
    scope.$emit("setBuildingAttribute", [id, field, value]);
 -->

<div class="page-break"></div>

<h1 id="alert-widgets">Alert widgets</h1>
<p>It's important to notify user when a change is going to be made or an error has appeared. You can create new customizable widgets on any panel element when its value is going to be changed.</p>
<p>To create a widget, you have to add two json properties on the json of the element whose value is being modified: 'confirmation' and 'confirmationWidget'.</p>
<pre><code>paint: {
    type: &#39;button&#39;,
    tooltip: &#39;paint&#39;,
    classed: &#39;ez3d-button fa-paint-brush&#39;,
    confirmation: true,
    confirmationWidget: {
        &#39;name&#39;: &#39;color-palette-selector-building&#39;,
        &#39;title&#39;: &#39;colorPaletteSelector&#39;,
        &#39;functionOnCreation&#39;: [&#39;colorPaletteWidget&#39;, &#39;building&#39;]
        &#39;eventCancel&#39;: [&#39;close_widget_notification&#39;, &#39;&#39;],
    }
}
</code></pre>
<p>The 'confirmation' property is a boolean that determines if the widget will be shown or not. It can be a raw value (true/false) or a function that returns a boolean value.</p>
<p>The 'confirmationWidget' property is an object composed of:</p>
<pre><code>confirmationWidget: {
    &#39;name&#39;: widget id,
    &#39;title&#39;: title displayed on the header,
    &#39;content&#39;: string with the content of the widget
    &#39;functionOnCreation&#39;: function with a json of the elements to create in the widget content container
    &#39;eventOk&#39;: [optional] the changes will be applied
    &#39;eventCancel&#39;: [optional] the changed value won&#39;t be applied and the panels will update
}
</code></pre>
<p>If the widget is going to be only informative, there must be an 'eventOk' property so that the changes are applied.</p>
<blockquote>
<p>Notice that both 'content' and 'functionOnCreation' properties create the content of the widget but in different ways, therefore you can only use one of these.</p>
</blockquote>
<div class="page-break"></div>

<h1 id="progress-bar-customization">Progress bar customization</h1>
<p>The progress bar is managed by events. It has 4 listeners:</p>
<ul>
<li>showProgressBar</li>
<li>resetProgressBar</li>
<li>updateProgressBar</li>
<li>hideProgressBar</li>
</ul>
<p>Resetting the progress bar will remove its width and set the bar animation. We recommend you to emit this event before updating the progress bar with a value.</p>
<p>To update the progress bar it is important to first open it by emitting the event 'showProgressBar'. The values will be sent as an object this way:</p>
<pre><code>ee.emitEvent(&#39;updateProgressBar&#39;, [{
    title: &#39;Title of the operation&#39;
    label1: &#39;Name of function&#39;,
    label2 : &#39;Step withing the function&#39;,
    value: 50
}]);
</code></pre>
<p>There are some cases that need to be mentioned when sending these parameters:</p>
<ul>
<li>If 'title' is undefined, it will keep its last value. If it's different than the current one, the progress bar will reset</li>
<li>If 'label1' is undefined, it will keep its last value. If title has changed, it won't have a value</li>
<li>If 'label2' is undefined it won't have a value</li>
<li>If 'value' is undefined it will be displayed the animation in the bar. Otherwise, it's value will be added to the width of the bar.</li>
</ul>
<blockquote>
<p>The simplest example is generating all the textures. If the project has 3 bulidings, you will have to divide 100 by number of buildings, so that the bar width will increase a 33.3% each time the event is emitted.</p>
</blockquote>
<p>When the progress bar is being hidden, all of its texts are removed and the animation is shown.</p>
<div class="page-break"></div>

<h1 id="layout-rules">Layout Rules</h1>
<p>The user can customize many options in the 3DLayout. By passing a 'rules' attribute to the 3DLayout instance with a collection of objects, you can define the default values, add special behaviours to the 3DLayout and customize the interface.</p>
<p>Example of rules object:</p>
<pre><code>var rules = {
    &#39;display&#39;: true,
    &#39;zoom&#39;: 21,
    &#39;logo&#39;: false,
    &#39;CustomPalette&#39;: [&#39;#ff0000&#39;, &#39;#00ff00&#39;]
}
</code></pre>
<p>Available rule objects expected by the 3DLayout:</p>
<ul>
<li>Scene preferences
<ul>
<li>Project</li>
<li>Development</li>
<li>3D canvas</li>
<li>Model</li>
<li>GUI</li>
</ul></li>
<li>Default buttons</li>
<li>Default languages</li>
<li>Default colors
<ul>
<li>Css colors</li>
<li>Building and roof colors</li>
<li>Keepout colors</li>
<li>Area colors</li>
<li>Dilatation lines colors</li>
<li>Module colors</li>
<li>Tree colors</li>
<li>Custom colors</li>
</ul></li>
<li>Default modules</li>
<li>Default providers</li>
<li>Default model values
<ul>
<li>Default model area values</li>
<li>Default model building values</li>
<li>Default model keepout values</li>
<li>Default model roof by type values</li>
<li>Default model roof values</li>
<li>Default model subarea by roof type values</li>
<li>Default model subarea values</li>
<li>Default model tree values</li>
</ul></li>
</ul>
<div class="page-break"></div>

<h2 id="scene-preferences">Scene preferences</h2>
<h3 id="project">Project</h3>
<p>The attributes are:</p>
<pre><code>{
    defaultProjectId: crm project to load if there&#39;s no hash (set to 0 to load the demo version),
    loadMockup: if true it loads a mockup,
    userToken: user token
}
</code></pre>
<h3 id="development">Development</h3>
<p>All the attributes are boolean:</p>
<pre><code>{
    debugPromises: debug promises (console log),
    disableUndoRedo: disable undo/redo feature (WIP),
    enableApi: enable Api feature,
    snapShotCrm: allow snapshots to be sent to crm,
    debugListeners: debug number of listeners in console.log,
    debugOpTime: shows the time an operation takes to be done
}
</code></pre>
<h3 id="3d-canvas">3D canvas</h3>
<p>Sample values:</p>
<pre><code>{
    activeMapper: true,
    activeRenderer: true,
    buildingTextures: true,
    zoomRatio: 1,
    translationRatio: 1,
    rotationRatio: 1,   
    enablePlayer: true,
    customDateTime: false,
    defaultDateTime: &#39;2019-01-01T10:00&#39;
}
</code></pre>
<p>The attributes are:</p>
<pre><code>{
    activeMapper: activate mapper on start,
    activeRenderer: activate renderer on start,
    buildingTextures: generate building textures when creating a building,
    zoomRatio: zoom ratio for 3D mode,
    translationRatio: translation ratio for 3D mode,
    rotationRatio: rotation ratio for 3D mode,
    enablePlayer: enable three.js canvas,
    customDateTime: enable custom date time for sun simulation,
    defaultDateTime: date time for sun simulation (customDateTime must be true, or defaultDateTime will be calculated depending on hemisphere)
}
</code></pre>
<h3 id="model">Model</h3>
<p>Sample values:</p>
<pre><code>{
    collisionBias: 0.03,
    angleBias: 0.5,
    maxAreaInclination: 75,
    sunSpeed: 3,
    googleApiKey: &#39;&#39;,
    bingApiKey: &#39;&#39;
}
</code></pre>
<p>The attributes are:</p>
<pre><code>{
    collisionBias: factor to validate collisions (with bigger values less collision),
    angleBias: factor to validate regular angles (with bigger values less angle precision),
    maxAreaInclination: area is disabled when the area inclination is bigger than this value,
    sunSpeed: position of element of the sun simulator speed,
    googleApiKey: Google api key for provider,
    bingApiKey: Bing api key for provider
}
</code></pre>
<h3 id="gui">GUI</h3>
<p>Sample values:</p>
<pre><code>{
    closeRightCanvas: true,
    showCoordinates: false,
    showTotalPower: true,
    customLogo: &#39;default&#39;,
    customNav: &#39;default&#39;,
    showNav: true,
    showLogo: true,
    defaultLanguage: &#39;en&#39;,
    defaultUnits: &#39;m&#39;,
    enableNotifications: true,
    manageFullscreen: true,
    movementStep: 0.1,
    snapToGrid: false,
    gridSize: 1,
    gridOffsetX: 0,
    gridOffsetY: 0,
    snapToGuides: true,
    snapToLines: true,
    snapToVertices: false,
    maxAllowedBuildings: 0,
    viewportMode: 4,
    customRowOffset: true,
    customRowOrientation: true,
    hidden: []
}
</code></pre>
<p>The attributes are:</p>
<pre><code>{
    closeRightCanvas: close right canvas on start,
    showCoordinates: show coordinates of the mouse in the right bottom corner,
    showTotalPower: show &#39;Total power&#39; indicator in the left upper corner,
    customLogo: custom logo url,
    customNav: show or hide nav (&#39;default&#39; shows nav),
    showNav: creates structure of panels,
    showLogo: show logo,
    defaultLanguage: string from available keys at &#39;defaultLanguages&#39;,
    defaultUnits: string from available keys at &#39;units&#39;,
    enableNotifications: enable operator notifications feature,
    manageFullscreen: manage fullscreen mode,
    movementStep: amount of movement in meters when using arrow keys to move solar panels,
    snapToGrid: enable snap vertices to grid,
    gridSize: grid distance to use as snap when using snap to move vertices,
    gridOffsetX: offset grid drawing in x axis,
    gridOffsetY: offset grid drawing in y axis,
    snapToGuides: activate snap to guides,
    snapToLines: enable snap to guidelines or edges,
    snapToVertices: enable snap to vertices or guideline intersections,
    maxAllowedBuildings: hides the button to create new buildings when their quantity is &gt;= to this value (if it&#39;s 0 there is no max quantity),
    viewportMode: viewport mode,
    customRowOffset: enable custom row offset (right click on modules),
    customRowOrientation: enable custom row orientation (right click on modules),
    hidden: array of json properties within that json that don&#39;t want to be shown in panels
}
</code></pre>
<p>The viewportMode options are:</p>
<ul>
<li>0: invisible interface</li>
<li>1: showcase mode</li>
<li>2: open street map</li>
<li>3: hide interface [DEPRECATED]</li>
<li>4: google streetview</li>
<li>5: default values editor</li>
<li>6: simple mode</li>
<li>7: documentation</li>
<li>8: autocad export</li>
</ul>
<div class="page-break"></div>

<h2 id="default-buttons">Default buttons</h2>
<p>There are several areas in the 3DLayout where the user can add his own functions. The defaultButtons property has different properties depending on the area of the buttons:</p>
<pre><code>{
    buttonsPanelLeft: { },
    buttonsPanelRight: { },
    buttonsPanelBottomZoom: { },
    buttonsPanelBottomRight: { },
    buttonsPanelBottomLeft: { },
    buttonsPanelBottomCenter: { },
    buttonsPanelRightViewportRight: { }
}
</code></pre>
<p>Each buttons panel has the following properties:</p>
<pre><code>buttonsPanelRight: {
    position: &#39;right&#39;,
    buttonsPanel: {
        type: &#39;groupBlock&#39;,
        elements: { }
    }
}
</code></pre>
<p>To create a button panel you must specify its type ('groupBlock').</p>
<p>The 'elements' property within 'buttonsPanel' contains all the buttons that exist in that button panel. For example, to create the 'Snapshot' and 'Fullscreen' buttons at the right-top of the canvas:</p>
<pre><code>elements: {
    classed: &#39;ez3d-panel-buttons ez3d-flex-start-wrap-row viewport_left_controls_left&#39;,
    snapshot: {
        type: &#39;button&#39;,
        tooltip: &#39;snapshot&#39;,
        classed: &#39;ez3d-button fa-camera-retro&#39;,
        confirmation: true,
        confirmationWidget: {
            &#39;name&#39;: &#39;snapshot&#39;,
            &#39;title&#39;: &#39;snapShot&#39;,
            &#39;functionOnCreation&#39;: [&#39;managerWidgetSnapShot&#39;, &#39;snapshot&#39;]
        }
    },
    fullScreen: {
        type: &#39;button&#39;,
        tooltip: &#39;fullScreen&#39;,
        classed: &#39;ez3d-button ez3d-screen-icon&#39;,
        changeIcon: &#39;screen&#39;,
        functionOnClick: [&#39;fullScreen&#39;, &#39;&#39;]
    },
}
</code></pre>
<p>The 'elements' property is composed of a 'classed' property to position the buttons, and the buttons by their name.</p>
<p>All the properties that a button can have are:</p>
<pre><code>buttonName: {
    type: &#39;button&#39;,
    id: button id,
    classed: class button attribute,
    content: button text,
    tooltip: button tooltip,
    property: attribute only model,
    confirmation: boolean for showing a button confirmation widget,
    confirmationWidget: {
        &#39;eventOk&#39;: event sent when clicking on the &#39;Ok&#39; button,
        &#39;eventCancel&#39;: event sent when clicking on the &#39;Cancel&#39; button,
        &#39;name&#39;: widget id,
        &#39;title&#39;: widget title,
        &#39;content&#39;: widget content,
        &#39;functionOnCreation&#39;: function called when creating the widget
    }
    value: button value,
    changeIcon: toggle button icon string,
    editable: disabled button attribute,
    active: active button class,
    elements: foldable elements list (object),
    functionOnClick: function called when clicking on the button,
    eventOnClick: event sent when clicking on the button
}
</code></pre>
<p>It is very important to specify the type of element (in this case 'button') for creating correctly these elements.</p>
<p>These buttons will be created following the order of the 'buttonsPanel.elements' object.</p>
<div class="page-break"></div>

<h2 id="default-languages">Default languages</h2>
<p>To customize the existing languages or add new ones, you have to edit them or create a new json property with the name of that language abbreviation ('EN', 'FR', 'ES', etc).</p>
<pre><code>var defaultLanguages = {
    &#39;EN&#39;: {
        &#39;key&#39;: &#39;english key value&#39;
    },
    &#39;FR&#39;: {
        &#39;key&#39;: &#39;french key value&#39;
    }
}
</code></pre>
<h2 id="default-colors">Default colors</h2>
<p>All the customizable colors can be also edited in the Preferences menu selecting the 'Default values editor' on the viewport mode. These are:</p>
<pre><code>var defaultColors = {
    cssColors: { },
    buildingColors: { },
    roofPointsColors: { },
    roofRidgeColors: { },
    keepoutColors: { },
    areaColors: { },
    subareaColors: { },
    dilatationLinesColors: { },
    moduleColors: { },
    treeColors: { },
    customColor: { }
}
</code></pre>
<h3 id="css-colors">Css colors</h3>
<p>These colors are used in the viewport and buttons in the canvas areas.</p>
<pre><code>cssColors: {
    first: &#39;#7AAD37&#39;,
    second: &#39;#222960&#39;,
    third: &#39;#E68A14&#39;,
    lightgray: &#39;#DDDCE6&#39;,
    mediumgray: &#39;#A7A3BC&#39;,
    darkgray: &#39;#999&#39;,
    disabledbuttons: &#39;#808080&#39;,
    disabledCustomSwtch: &#39;#e0dfe4&#39;,
    primaryFont: &#39;#ff0000&#39;,
    white: &#39;#ffffff&#39;,
}
</code></pre>
<h3 id="building-and-roof-colors">Building and roof colors</h3>
<p>Building and roof colors have the same main attributes:</p>
<pre><code>{
    fill: &#39;#a52a2a&#39;,
    fillOpacity: 0.1,
    stroke: &#39;#000&#39;,
    strokeWidth: 0.4,
    strokeDasharray: 0
}
</code></pre>
<p>These attributes can belong to different properties. For example 'standard', 'hover', 'active', 'vertices', etc.</p>
<blockquote>
<p>Note that every time it appears an empty object ({ }) in the examples, these main attributes exist in them.</p>
</blockquote>
<pre><code>buildingColors: {
    path: {
        standard: {
            fill: &#39;#a52a2a&#39;,
            fillOpacity: 0.1,
            stroke: &#39;#000&#39;,
            strokeWidth: 0.4,
            strokeDasharray: 0
        },
        hover: { },
        active: { },
        roofContext: { },
        move: { }
    },
    vertices: {
        standard: { }
    },
    center: { },
    autocad: { }
}
</code></pre>
<div class="page-break"></div>

<p>Also, in 'roofPointsColors' and 'roofRidgeColors' properties there's a new property called 'radius' on each property.</p>
<pre><code>roofPointsColors: {
    standard: {
        fill: &#39;#008000&#39;,
        fillOpacity: 1,
        stroke: &#39;#fff&#39;,
        strokeWidth: 0,
        strokeDasharray: 0,
        radius: 3
    },
    locked: { }
},
roofRidgeColors: {
    path: {
        standard: { }
    }
}
</code></pre>
<h3 id="keepout-colors">Keepout colors</h3>
<p>In keepout colors property there are two new properties called 'offsettedPath' and 'autocad':</p>
<pre><code>keepoutColors: {
    path: {
        standard: { },
        active: { },
        hover: { },
        move: { },
        offsettedPath: { }
    },
    autocad: { }
</code></pre>
<div class="page-break"></div>

<h3 id="area-colors">Area colors</h3>
<p>Areas and subareas have the same properties except for 'autocad' property, which is only available in areaColors.</p>
<pre><code>areaColors: {
    path: {
        standard: { },
        active: { },
        move: { },
        hover: { },
        offsettedPath: { },
    },
    vertices: {
        standard: { },
        move: { }
    },
    autocad: {
        fill: &#39;transparent&#39;,
        fillOpacity: 1,
        stroke: &#39;#ff3047&#39;,
        strokeWidth: 0.3,
        strokeDasharray: 0,
        strokeLine: &#39;#6fff6d&#39;,
        strokeWidthLine: 0.02
    }
},
</code></pre>
<h3 id="dilatation-lines-colors">Dilatation lines colors</h3>
<p>Sample values:</p>
<pre><code>dilatationLinesColors: {
    cols: {
        stroke: &#39;#ffa500&#39;
    },
    rows: {
        stroke: &#39;#00ffff&#39;
    }
}
</code></pre>
<div class="page-break"></div>

<h3 id="module-colors">Module colors</h3>
<p>Properties for module colors:</p>
<pre><code>moduleColors: {
    path: {
        module: { },
        moduleSelected: { },
        moduleHover: { },
        empty: { },
        emptyHover: { },
        collision: { }
    },
    autocad: { }
},
</code></pre>
<h3 id="tree-colors">Tree colors</h3>
<p>Properties for tree colors:</p>
<pre><code>treeColors: {
    standard: { },
    active: { },
    hover: { }
}
</code></pre>
<h3 id="custom-colors">Custom colors</h3>
<p>Sample values:</p>
<pre><code>customColor: [
    &#39;#0000FF&#39;, &#39;#a52a2a&#39;, &#39;#ff0000&#39;, &#39;#1f77b4&#39;, &#39;#aec7e8&#39;, &#39;#ff7f0e&#39;,
    &#39;#ffbb78&#39;, &#39;#2ca02c&#39;, &#39;#98df8a&#39;, &#39;#d62728&#39;, &#39;#ff9896&#39;, &#39;#9467bd&#39;,
    &#39;#c5b0d5&#39;, &#39;#8c564b&#39;, &#39;#c49c94&#39;, &#39;#e377c2&#39;, &#39;#f7b6d2&#39;, &#39;#7f7f7f&#39;,
    &#39;#c7c7c7&#39;, &#39;#bcbd22&#39;, &#39;#dbdb8d&#39;, &#39;#17becf&#39;, &#39;#9edae5&#39;
]
</code></pre>
<div class="page-break"></div>

<h2 id="default-modules">Default modules</h2>
<p>The defaultModules variable is an array of objects with the modules information:</p>
<pre><code>var defaultModules = [
    {
        id: 47113,
        name: &#39;BenQ&#39;,
        reference: &#39;327Wp Mono Zwart&#39;,
        power: 327,
        length: 1.559,
        width: 1.046,
        height: 0.046
    }
</code></pre>
<h2 id="default-providers">Default providers</h2>
<p>The defaultProviders variable is an array of strings with the providers names:</p>
<pre><code>var defaultProviders = [&#39;White Map&#39;, &#39;Google Hybrid&#39;, &#39;Bing&#39;, &#39;Carto&#39;, &#39;Open Street Maps&#39;];
</code></pre>
<h2 id="default-model-values">Default model values</h2>
<p>The defaultModelValues property is an object with the following properties:</p>
<pre><code>var defaultModelValues = {
    area: areaDefaultValues,
    building: buildingDefaultValues,
    keepout: keepoutDefaultValues,
    roofByType: roofByTypeDefaultValues,
    roof: roofDefaultValues,
    subareaByRoofType: subareaByRoofTypeDefaultValues,
    subarea: subareaDefaultValues,
    tree: treeDefaultValues
}
</code></pre>
<h3 id="default-model-area-values">Default model area values</h3>
<p>Sample values:</p>
<pre><code>var areaDefaultValues = {
    disabled: false,
    populated: true
}
</code></pre>
<div class="page-break"></div>

<h3 id="default-model-building-values">Default model building values</h3>
<p>Sample values:</p>
<pre><code>var buildingDefaultValues = {
    overlapping: true,
    name: &#39; &#39;,
    height: 10,
    maxHeight: Infinity,
    minHeight: 0,
    offset: [0],
    padding: {
        eaves: false,
        parapet: 0,
        height: 0
    },
    populated: true,
    regular: true,
    ridge: {
        enabled: false
    },
    hidden: [ ]
}
</code></pre>
<h3 id="default-model-keepout-values">Default model keepout values</h3>
<p>Sample values:</p>
<pre><code>var keepoutDefaultValues = {
    crop: false,
    height: 1,
    invisible: false,
    offset: [0],
    regular: true,
    type: &#39;vertical&#39;,
    hidden: [ ]
}
</code></pre>
<div class="page-break"></div>

<h3 id="default-model-roof-by-type-values">Default model roof by type values</h3>
<p>Sample values:</p>
<pre><code>var roofByTypeDefaultValues = {
    flat: {
        material: &#39;bitumen&#39;,
        availableMaterial: {
            gravel: {
                value: &#39;gravel&#39;,
                image: &#39;gravel&#39;,
                label: &#39;gravel&#39;
            },
            bitumen: { },
            membrane: { },
            concrete: { }
        },
        availableOrientation: [ ],
        inclination: 0,
        offset: [1],
        orientation: &#39;&#39;,
        hidden: [ ],
        locked: [ ]
    },
    gabled: { },
    hipped: { },
    pyramid { },
    mansard { },
    pent: {
        material: &#39;tiled&#39;,
        availableMaterial: [
            &#39;tiled&#39;,
            &#39;trapezoidal&#39;,
            &#39;corrugated&#39;
        ],
        offset: [0.4],
        orientation: &#39;S&#39;,
        availableOrientation: [&#39;E&#39;, &#39;W&#39;, &#39;N&#39;, &#39;S&#39;],
        inclination: 30,
        hidden: [ ],
        locked: [ ]
    }
}
</code></pre>
<div class="page-break"></div>

<h3 id="default-model-roof-values">Default model roof values</h3>
<p>Sample values:</p>
<pre><code>var roofDefaultValues = {
    disabled: false,
    inclination: 0,
    lockRoofPoints: false,
    roofPointsSymmetry: true,
    material: &#39;bitumen&#39;,
    offset: [0],
    orientation: &#39;SN&#39;,
    type: &#39;flat&#39;,
    hidden: [ ]
}
</code></pre>
<h3 id="default-model-subarea-by-roof-type-values">Default model subarea by roof type values</h3>
<p>Sample values:</p>
<pre><code>var subareaByRoofTypeDefaultValues = {
    flat: {
        modelId: 471131,
        azimuth: &#39;&#39;,
        inset: {x: 0.025, y: 0.025},
        inclination: 15,
        useShadowsCalculation: false,
        availableInclination: &#39;&#39;,
        placement: &#39;landscape&#39;,
        availablePlacement: [&#39;landscape&#39;,&#39;portrait&#39;],
        structure: &#39;Standard&#39;,
        availableStructure: [&#39;EW&#39;,&#39;Standard&#39;],
        staggered: {
            enabled: false,
            offset: 0,
            offsetMax: 3,
            alternate: false
        },
        dilatationLines: {
            enabled: false,
            x: 30,
            y: 30,
            w: 0.35,
            h: 0.1
        }
    },
    pent: { },
    gabled: { },
    hipped: { },
    pyramid: { },
    mansard: { }
}
</code></pre>
<h3 id="default-model-subarea-values">Default model subarea values</h3>
<p>Sample values:</p>
<pre><code>var subareaDefaultValues = {
    crop: false,
    disabled: false,
    offset: [0],
    regular: true,
    hidden: [ ]
}
</code></pre>
<h3 id="default-model-tree-values">Default model tree values</h3>
<p>Sample values:</p>
<pre><code>var treeDefaultValues = {
    disabled: false,
    crownTopHeight: 10,
    crownHigherHeight: 7,
    crownHigherRadius: 1.42,
    crownMiddleHeight: 5,
    crownMiddleRadius: 1.75,
    crownLowerHeight: 3.5,
    crownLowerRadius: 1.42,
    trunkHeight: 2.5,
    trunkRadius: 0.33,
    hidden: [ ]
}
</code></pre>
</body>
</html>
